"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.importRouteFiles = void 0;
const path_1 = require("path");
const convertFileNameToPath_1 = require("./convertFileNameToPath");
function importRouteFiles(routes, routesDirPath) {
    const routeObjects = [];
    routes.forEach((route) => {
        const routePath = (0, path_1.join)(routesDirPath, route);
        let handler = require(routePath); // eslint-disable-line
        if (handler.default) {
            handler = handler.default;
        }
        if (!handler)
            throw new Error(`${route} does not export a handler`);
        const parsedFile = (0, path_1.parse)((0, path_1.join)('/', route));
        const fileName = (0, path_1.join)(parsedFile.dir, parsedFile.name);
        const path = (0, convertFileNameToPath_1.convertFileNameToPath)(fileName);
        routeObjects.push({
            path,
            route: handler,
            file: routePath,
        });
    });
    return routeObjects;
}
exports.importRouteFiles = importRouteFiles;
